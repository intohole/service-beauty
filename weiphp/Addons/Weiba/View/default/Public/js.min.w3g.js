function hasClass(e,t){return $(e).hasClass(t)}function addClass(e,t){$(e).addClass(t)}function removeClass(e,t){$(e).removeClass(t)}function L(e,t){if("undefined"==typeof LANG[e])return e;if("object"!=typeof t)return LANG[e];var n=LANG[e];for(var i in t)n=n.replace("{"+i+"}",t[i]);return n}function strip_tags(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(i,"").replace(n,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})}!function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(n){function i(t){for(var i=new FormData,o=0;o<t.length;o++)"file"!=t[o].type&&i.append(t[o].name,t[o].value);if(l.find("input:file:enabled").each(function(){var t=e(this).attr("name"),n=this.files;if(t)for(var o=0;o<n.length;o++)i.append(t,n[o])}),n.extraData)for(var a in n.extraData)i.append(a,n.extraData[a]);n.data=null;var r=e.extend(!0,{},e.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:"POST"});r.data=null;var s=r.beforeSend;r.beforeSend=function(e,t){t.data=i,e.upload&&(e.upload.onprogress=function(e){t.progress(e.position,e.total)}),s&&s.call(t,e,n)},e.ajax(r)}function o(i){function o(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function r(){function n(){try{var e=o(m).readyState;t("state = "+e),"uninitialized"==e.toLowerCase()&&setTimeout(n,50)}catch(i){t("Server abort: ",i," (",i.name,")"),s(C),y&&clearTimeout(y),y=void 0}}var i=l.attr("target"),r=l.attr("action");_.setAttribute("target",f),a||_.setAttribute("method","POST"),r!=d.url&&_.setAttribute("action",d.url),d.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(y=setTimeout(function(){b=!0,s($)},d.timeout));var c=[];try{if(d.extraData)for(var u in d.extraData)c.push(e('<input type="hidden" name="'+u+'">').attr("value",d.extraData[u]).appendTo(_)[0]);d.iframeTarget||(p.appendTo("body"),m.attachEvent?m.attachEvent("onload",s):m.addEventListener("load",s,!1)),setTimeout(n,15),_.submit()}finally{_.setAttribute("action",r),i?_.setAttribute("target",i):l.removeAttr("target"),e(c).remove()}}function s(n){if(!g.aborted&&!E){try{T=o(m)}catch(i){t("cannot access response document: ",i),n=C}if(n===$&&g)return void g.abort("timeout");if(n==C&&g)return void g.abort("server abort");if(T&&T.location.href!=d.iframeSrc||b){m.detachEvent?m.detachEvent("onload",s):m.removeEventListener("load",s,!1);var a,r="success";try{if(b)throw"timeout";var l="xml"==d.dataType||T.XMLDocument||e.isXMLDoc(T);if(t("isXml="+l),!l&&window.opera&&(null==T.body||""==T.body.innerHTML)&&--F)return t("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var c=T.body?T.body:T.documentElement;g.responseText=c?c.innerHTML:null,g.responseXML=T.XMLDocument?T.XMLDocument:T,l&&(d.dataType="xml"),g.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e]},c&&(g.status=Number(c.getAttribute("status"))||g.status,g.statusText=c.getAttribute("statusText")||g.statusText);var u=(d.dataType||"").toLowerCase(),f=/(json|script|text)/.test(u);if(f||d.textarea){var v=T.getElementsByTagName("textarea")[0];if(v)g.responseText=v.value,g.status=Number(v.getAttribute("status"))||g.status,g.statusText=v.getAttribute("statusText")||g.statusText;else if(f){var w=T.getElementsByTagName("pre")[0],_=T.getElementsByTagName("body")[0];w?g.responseText=w.textContent?w.textContent:w.innerText:_&&(g.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"!=u||g.responseXML||null==g.responseText||(g.responseXML=A(g.responseText));try{k=L(g,u,d)}catch(n){r="parsererror",g.error=a=n||r}}catch(n){t("error caught: ",n),r="error",g.error=a=n||r}g.aborted&&(t("upload aborted"),r=null),g.status&&(r=g.status>=200&&g.status<300||304===g.status?"success":"error"),"success"===r?(d.success&&d.success.call(d.context,k,"success",g),h&&e.event.trigger("ajaxSuccess",[g,d])):r&&(void 0==a&&(a=g.statusText),d.error&&d.error.call(d.context,g,r,a),h&&e.event.trigger("ajaxError",[g,d,a])),h&&e.event.trigger("ajaxComplete",[g,d]),h&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,g,r),E=!0,d.timeout&&clearTimeout(y),setTimeout(function(){d.iframeTarget||p.remove(),g.responseXML=null},100)}}}var c,u,d,h,f,p,m,g,v,w,b,y,_=l[0],x=!!e.fn.prop;if(i)if(x)for(u=0;u<i.length;u++)c=e(_[i[u].name]),c.prop("disabled",!1);else for(u=0;u<i.length;u++)c=e(_[i[u].name]),c.removeAttr("disabled");if(e(":input[name=submit],:input[id=submit]",_).length)return void alert('Error: Form elements must not have name or id of "submit".');if(d=e.extend(!0,{},e.ajaxSettings,n),d.context=d.context||d,f="jqFormIO"+(new Date).getTime(),d.iframeTarget?(p=e(d.iframeTarget),w=p.attr("name"),null==w?p.attr("name",f):f=w):(p=e('<iframe name="'+f+'" src="'+d.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),m=p[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var i="timeout"===n?"timeout":"aborted";t("aborting upload... "+i),this.aborted=1,p.attr("src",d.iframeSrc),g.error=i,d.error&&d.error.call(d.context,g,i,n),h&&e.event.trigger("ajaxError",[g,d,i]),d.complete&&d.complete.call(d.context,g,i)}},h=d.global,h&&!e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[g,d]),d.beforeSend&&d.beforeSend.call(d.context,g,d)===!1)return void(d.global&&e.active--);if(!g.aborted){v=_.clk,v&&(w=v.name,w&&!v.disabled&&(d.extraData=d.extraData||{},d.extraData[w]=v.value,"image"==v.type&&(d.extraData[w+".x"]=_.clk_x,d.extraData[w+".y"]=_.clk_y)));var $=1,C=2,M=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");S&&M&&(d.extraData=d.extraData||{},d.extraData[S]=M),d.forceSync?r():setTimeout(r,10);var k,T,E,F=50,A=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},N=e.parseJSON||function(e){return window.eval("("+e+")")},L=function(t,n,i){var o=t.getResponseHeader("content-type")||"",a="xml"===n||!n&&o.indexOf("xml")>=0,r=a?t.responseXML:t.responseText;return a&&"parsererror"===r.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(r=i.dataFilter(r,n)),"string"==typeof r&&("json"===n||!n&&o.indexOf("json")>=0?r=N(r):("script"===n||!n&&o.indexOf("javascript")>=0)&&e.globalEval(r)),r}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;var a,r,s,l=this;"function"==typeof n&&(n={success:n}),a=this.attr("method"),r=this.attr("action"),s="string"==typeof r?e.trim(r):"",s=s||window.location.href||"",s&&(s=(s.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:a||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var c={};if(this.trigger("form-pre-serialize",[this,n,c]),c.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var u=n.traditional;void 0===u&&(u=e.ajaxSettings.traditional);var d,h=this.formToArray(n.semantic);if(n.data&&(n.extraData=n.data,d=e.param(n.data,u)),n.beforeSubmit&&n.beforeSubmit(h,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,n,c]),c.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=e.param(h,u);d&&(f=f?f+"&"+d:d),"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+f,n.data=null):n.data=f;var p=[];if(n.resetForm&&p.push(function(){l.resetForm()}),n.clearForm&&p.push(function(){l.clearForm(n.includeHidden)}),!n.dataType&&n.target){var m=n.success||function(){};p.push(function(t){var i=n.replaceTarget?"replaceWith":"html";e(n.target)[i](t).each(m,arguments)})}else n.success&&p.push(n.success);n.success=function(e,t,i){for(var o=n.context||n,a=0,r=p.length;r>a;a++)p[a].apply(o,[e,t,i||l,l])};var g=e("input:file:enabled[value]",this),v=g.length>0,w="multipart/form-data",b=l.attr("enctype")==w||l.attr("encoding")==w,y=!!(v&&g.get(0).files&&window.FormData);t("fileAPI :"+y);var _=(v||b)&&!y;return n.iframe!==!1&&(n.iframe||_)?n.closeKeepAlive?e.get(n.closeKeepAlive,function(){o(h)}):o(h):(v||b)&&y?(n.progress=n.progress||e.noop,i(h)):e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,i=e(n);if(!i.is(":submit,input:image")){var o=i.closest(":submit");if(0==o.length)return;n=o[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!=t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var r=i.offset();a.clk_x=t.pageX-r.left,a.clk_y=t.pageY-r.top}else a.clk_x=t.pageX-n.offsetLeft,a.clk_y=t.pageY-n.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(0===this.length)return n;var i=this[0],o=t?i.getElementsByTagName("*"):i.elements;if(!o)return n;var a,r,s,l,c,u,d;for(a=0,u=o.length;u>a;a++)if(c=o[a],s=c.name)if(t&&i.clk&&"image"==c.type)c.disabled||i.clk!=c||(n.push({name:s,value:e(c).val(),type:c.type}),n.push({name:s+".x",value:i.clk_x},{name:s+".y",value:i.clk_y}));else if(l=e.fieldValue(c,!0),l&&l.constructor==Array)for(r=0,d=l.length;d>r;r++)n.push({name:s,value:l[r]});else null!==l&&"undefined"!=typeof l&&n.push({name:s,value:l,type:c.type});if(!t&&i.clk){var h=e(i.clk),f=h[0];s=f.name,s&&!f.disabled&&"image"==f.type&&(n.push({name:s,value:h.val()}),n.push({name:s+".x",value:i.clk_x},{name:s+".y",value:i.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i=this.name;if(i){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var a=0,r=o.length;r>a;a++)n.push({name:i,value:o[a]});else null!==o&&"undefined"!=typeof o&&n.push({name:this.name,value:o})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,o=this.length;o>i;i++){var a=this[i],r=e.fieldValue(a,t);null===r||"undefined"==typeof r||r.constructor==Array&&!r.length||(r.constructor==Array?e.merge(n,r):n.push(r))}return n},e.fieldValue=function(t,n){var i=t.name,o=t.type,a=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var r=t.selectedIndex;if(0>r)return null;for(var s=[],l=t.options,c="select-one"==o,u=c?r+1:l.length,d=c?r:0;u>d;d++){var h=l[d];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,i=this.tagName.toLowerCase();t.test(n)||"textarea"==i||e&&/hidden/.test(n)?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==i&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery);var getLength=function(e,t){return 1==t?Math.ceil(e.replace(/((news|telnet|nttp|file|http|ftp|https):\/\/){1}(([-A-Za-z0-9]+(\.[-A-Za-z0-9]+)*(\.[-A-Za-z]{2,5}))|([0-9]{1,3}(\.[0-9]{1,3}){3}))(:[0-9]*)?(\/[-A-Za-z0-9_\$\.\+\!\*\(\),;:@&=\?\/~\#\%]*)*/gi,"xxxxxxxxxxxxxxxxxxxx").replace(/^\s+|\s+$/gi,"").replace(/[^\x00-\xff]/gi,"xx").length/2):Math.ceil(e.replace(/^\s+|\s+$/gi,"").replace(/[^\x00-\xff]/gi,"xx").length/2)},subStr=function(e,t){if(!e)return"";t=t>0?2*t:280;for(var n=0,i="",o=0;o<e.length;o++){if(e.charCodeAt(o)>255?n+=2:n++,n>t)return i;i+=e.charAt(o)}return e},async_page=function(url,target,callback){if(!url)return!1;if(target)var $target=$(target);return $.post(url,{},function(txt){if(txt=eval("("+txt+")"),txt.status)target&&$target.html(txt.data),callback&&(callback.match(/[(][^()]*[)]/)?eval(callback):eval(callback)(txt)),txt.info&&ui.success(txt.info);else if(txt.info)return ui.error(txt.info),!1}),!0},async_turn_page=function(e,t){$(e).click(function(e){var n=$(e.target),i=n.attr("href");return i&&async_page(i,t),!1})},async_form=function(form){var $form=form?$(form):$("form[ajax='ajax']");$form.bind("submit",function(){var callback=$(this).attr("callback"),options={success:function(txt){txt=eval("("+txt+")"),callback?callback.match(/[(][^()]*[)]/)?eval(callback):eval(callback)(txt):txt.status&&txt.info?ui.success(txt.info):txt.info&&ui.error(txt.info)}};return $(this).ajaxSubmit(options),!1})},copy_clip=function(e){if(window.clipboardData)window.clipboardData.setData("Text",e);else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return alert(L("PUBLIC_EXPLORER_ISCTRL")),!1}var n=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!n)return!1;var i=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!i)return!1;i.addDataFlavor("text/unicode");var o=new Object,o=(new Object,Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString)),a=e;o.data=a,i.setTransferData("text/unicode",o,2*a.length);var r=Components.interfaces.nsIClipboard;if(!n)return!1;n.setData(i,null,r.kGlobalClipboard)}return ui.success(L("PUBLIC_EXPLORER_CTRL")),!0},toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.childNodes[0];return e.removeChild(n),n}}(),implode=function(e,t){var n="",i="",o="";if(1===arguments.length&&(t=e,e=""),"object"==typeof t){if("[object Array]"===Object.prototype.toString.call(t))return t.join(e);for(n in t)i+=o+t[n],o=e;return i}return t},explode=function(e,t,n){var i={0:""};if(arguments.length<2||"undefined"==typeof arguments[0]||"undefined"==typeof arguments[1])return null;if(""===e||e===!1||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t)return i;if(e===!0&&(e="1"),!n)return t.toString().split(e.toString());var o=t.toString().split(e.toString()),a=o.splice(0,n-1),r=o.join(e.toString());return a.push(r),a},strlen=function(e){var t=e+"",n=0,i="",o=0;if(!this.php_js||!this.php_js.ini||!this.php_js.ini["unicode.semantics"]||"on"!==this.php_js.ini["unicode.semantics"].local_value.toLowerCase())return e.length;var a=function(e,t){var n=e.charCodeAt(t),i="",o="";if(n>=55296&&56319>=n){if(e.length<=t+1)throw"High surrogate without following low surrogate";if(i=e.charCodeAt(t+1),56320>i||i>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(n>=56320&&57343>=n){if(0===t)throw"Low surrogate without preceding high surrogate";if(o=e.charCodeAt(t-1),55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}return e.charAt(t)};for(n=0,o=0;n<t.length;n++)(i=a(t,n))!==!1&&o++;return o},substr=function(e,t,n){var i=0,o=!0,a=0,r=0,s=0,l="";e+="";var c=e.length;switch(this.php_js=this.php_js||{},this.php_js.ini=this.php_js.ini||{},this.php_js.ini["unicode.semantics"]&&this.php_js.ini["unicode.semantics"].local_value.toLowerCase()){case"on":for(i=0;i<e.length;i++)if(/[\uD800-\uDBFF]/.test(e.charAt(i))&&/[\uDC00-\uDFFF]/.test(e.charAt(i+1))){o=!1;break}if(!o){if(0>t)for(i=c-1,a=t+=c;i>=a;i--)/[\uDC00-\uDFFF]/.test(e.charAt(i))&&/[\uD800-\uDBFF]/.test(e.charAt(i-1))&&(t--,a--);else for(var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!=u.exec(e);){var d=u.lastIndex;if(!(t>d-2))break;t++}if(t>=c||0>t)return!1;if(0>n){for(i=c-1,r=c+=n;i>=r;i--)/[\uDC00-\uDFFF]/.test(e.charAt(i))&&/[\uD800-\uDBFF]/.test(e.charAt(i-1))&&(c--,r--);return t>c?!1:e.slice(t,c)}for(s=t+n,i=t;s>i;i++)l+=e.charAt(i),/[\uD800-\uDBFF]/.test(e.charAt(i))&&/[\uDC00-\uDFFF]/.test(e.charAt(i+1))&&s++;return l}case"off":default:0>t&&(t+=c),c="undefined"==typeof n?c:0>n?n+c:n+t}},trim=function(e,t){return e},rtrim=function(e,t){return e},ltrim=function(e,t){return e},flashTextarea=function(e){var t=0,n=function(){return t>3?!1:(hasClass(e,"fb")?removeClass(e,"fb"):addClass(e,"fb"),setTimeout(n,300),void t++)};return n(),!1},updateUserData=function(e,t,n){var i=M.nodes.events[e];if("undefined"==typeof i)return!1;"undefined"==typeof n&&(n=UID);for(var o in i){var a=i[o],r=M.getEventArgs(a);r.uid==n&&(a.innerHTML=parseInt(a.innerHTML,10)+parseInt(t,10))}return!1},scrolltotop={setting:{startline:100,scrollto:0,scrollduration:0,fadeduration:[500,100]},controlHTML:'<a href="#top" class="top_stick">&nbsp;</a>',controlattrs:{offsetx:20,offsety:30},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},scrollup:function(){this.cssfixedsupport||this.$control.css({opacity:0});var e=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);e="string"==typeof e&&1==jQuery("#"+e).length?jQuery("#"+e).offset().top:this.setting.scrollto,this.$body.animate({scrollTop:e},this.setting.scrollduration)},keepfixed:function(){var e=jQuery(window),t=e.scrollLeft()+e.width()-this.$control.width()-this.controlattrs.offsetx,n=e.scrollTop()+e.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:t+"px",top:n+"px"})},togglecontrol:function(){var e=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=e>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&(this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]),this.state.isvisible=!1)},init:function(){jQuery(document).ready(function(e){var t=scrolltotop,n=document.all;t.cssfixedsupport=!n||n&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,t.$body=e(window.opera?"CSS1Compat"==document.compatMode?"html":"body":"html,body"),t.$control=e('<div id="topcontrol">'+t.controlHTML+"</div>").css({position:t.cssfixedsupport?"fixed":"absolute",bottom:t.controlattrs.offsety+59+"px",right:t.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:L("PUBLIC_MOVE_TOP")}).click(function(){return t.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=t.$control.text()&&t.$control.css({width:t.$control.width()}),t.togglecontrol(),e('a[href="'+t.anchorkeyword+'"]').click(function(){return t.scrollup(),!1}),e(window).bind("scroll resize",function(e){t.togglecontrol()})})}};scrolltotop.init();var unique=function(e){for(var t={},n=0,i=e.length;i>n;n++)t[e[n]]=!0;var o=[];for(var n in t)o.push[n];return o},shortcut=function(e,t,n){var i={type:"keydown",propagate:!1,target:document};if(n)for(var o in i)"undefined"==typeof n[o]&&(n[o]=i[o]);else n=i;var a=n.target;"string"==typeof n.target&&(a=document.getElementById(n.target));var r=function(i){i=i||window.event,i.keyCode?code=i.keyCode:i.which&&(code=i.which);for(var o=String.fromCharCode(code).toLowerCase(),a=e.toLowerCase().split("+"),r=0,l={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},c={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u=0;k=a[u],u<a.length;u++)"ctrl"==k||"control"==k?i.ctrlKey&&r++:"shift"==k?i.shiftKey&&r++:"alt"==k?i.altKey&&r++:k.length>1?c[k]==code&&r++:o==k?r++:l[o]&&i.shiftKey&&(o=l[o],o==k&&r++);if(r==a.length){if(0!=s)return!1;if(s=1,setTimeout(function(){s=0},1500),t(i),!n.propagate)return i.cancelBubble=!0,i.returnValue=!1,i.stopPropagation&&(i.stopPropagation(),i.preventDefault()),!1}},s=0;a.addEventListener?a.addEventListener(n.type,r,!1):a.attachEvent?a.attachEvent("on"+n.type,r):a["on"+n.type]=r},atWho=function(e){e.atWho("@",{tpl:"<li id='${id}' data-value='${searchkey}' input-value='${name}'><img src='${faceurl}'  height='20' width='20' /> ${name}</li>",callback:function(e,t){""==keyname.text?$.ajax({url:U("widget/SearchUser/searchAt"),type:"GET",dataType:"json",success:function(e){return null==e.data?void $("#at-view").hide():(datas=$.map(e.data,function(e,t){return{id:e.uid,key:e.uname+":",name:e.uname,faceurl:e.avatar_small,searchkey:e.search_key}}),void t(datas))}}):$.ajax({url:U("widget/SearchUser/search"),type:"GET",data:"type=at&key="+keyname.text,dataType:"json",success:function(e){return null==e.data?void $("#at-view").hide():(datas=$.map(e.data,function(e,t){return{id:e.uid,key:e.uname+":",name:e.uname,faceurl:e.avatar_small,searchkey:e.search_key}}),void t(datas))}})}}).atWho("＃",{tpl:"<li id='${id}' data-value='${searchkey}' input-value='${name}＃'>${name}</li>",callback:function(e,t){$.ajax({url:U("widget/TopicList/searchTopic"),type:"GET",data:"key="+keyname.text,dataType:"json",success:function(e){return null==e?void $("#at-view").hide():(datas=$.map(e,function(e,t){return{id:e.topic_id,name:e.topic_name,searchkey:e.topic_name}}),void t(datas))}})}})};$(function(){$.fn.extend({inputToEnd:function(e){var t=$(this)[0];if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=e,this.focus();else if(t.selectionStart||"0"==t.selectionStart){var n=t.selectionStart,i=t.selectionEnd,o=t.scrollTop;t.value=t.value.substring(0,n)+e+t.value.substring(i,t.value.length),this.focus(),t.selectionStart=n+e.length,t.selectionEnd=n+e.length,t.scrollTop=o}else this.value=e,this.focus()},inputToDIV:function(e){var t=$(this)[0];t.focus();var n=window.getSelection?window.getSelection():document.selection,i=n.createRange?n.createRange():n.getRangeAt(0);if(window.getSelection){i.collapse(!1);for(var o=i.createContextualFragment(e),a=o.lastChild;a&&"br"==a.nodeName.toLowerCase()&&a.previousSibling&&"br"==a.previousSibling.nodeName.toLowerCase();){var r=a;a=a.previousSibling,o.removeChild(r)}i.insertNode(o),a&&(i.setEndAfter(a),i.setStartAfter(a)),n.removeAllRanges(),n.addRange(i)}else{var n=window.getSelection?window.getSelection():document.selection,i=n.createRange?n.createRange():n.getRangeAt(0);i.pasteHTML(e),i.collapse(!1),i.select()}}})});var removeHTMLTag=function(e){return e=e.replace(/<\/?[^>]*>/g,"")},removeScriptHTMLTag=function(e){return e.replace(/<(script|link|style|iframe)(.|\n)*\/\1>\s*/gi,"")},quickLogin=function(){ui.box.load(U("public/Passport/quickLogin"),"快速登录")},quickLogin=function(e){ui.box.load(U("public/Passport/quickLogin")+"&url="+e,"快速登录")};!function(){var e=function(e,t){try{this.dPicSection="string"==typeof e?document.getElementById(e):e,this.nInterval=t>0?t:2e3,this.dPicList=this.dPicSection.getElementsByTagName("div"),this.nPicNum=this.dPicList.length}catch(n){return n}this.nCurrentPic=this.nPicNum-1,this.nNextPic=0,this.fInitPicList(),this.dPicNav=this.dPicSection.getElementsByTagName("ul")[0],this.fInitPicNav(),$("#"+e).mouseover(function(){$("#"+e).find(".banner_right_arrow").show(),$("#"+e).find(".banner_left_arrow").show()}),$("#"+e).mouseout(function(){$("#"+e).find(".banner_right_arrow").hide(),$("#"+e).find(".banner_left_arrow").hide()});var i=this;$("#"+e).find(".banner_right_arrow").click(function(){i.nCurrentPic!=i.nPicNum-1?i.fGoto(i.nCurrentPic+1):i.nCurrentPic==i.nPicNum-1&&i.fGoto(0)}),$("#"+e).find(".banner_left_arrow").click(function(){0!=i.nCurrentPic?i.fGoto(i.nCurrentPic-1):0==i.nCurrentPic&&i.fGoto(i.nPicNum-1)}),clearTimeout(this.oTimer),this.fSwitch(),this.fStart()};e.prototype={constructor:e,fInitPicList:function(){var e=this;this.dPicSection.onmouseover=function(){e.fPause()},this.dPicSection.onmouseout=function(){e.fGoon()}},fInitPicNav:function(){for(var e=this,t="",n=this.nPicNum,i=0;n>i;i++)t+='<li style="list-style-type:none;"><a href="javascript:;" target="_self"></a></li>';this.dPicNav.innerHTML=t;for(var o=this.dPicNav.getElementsByTagName("a"),a=o.length;a-- >0;)o[a].nIndex=a,o[a].onclick=function(){return e.fGoto(this.nIndex),!1};this.dPicNavMenu=o},fSwitch:function(){if(!(this.nPicNum<=1)){var e=this.nCurrentPic,t=this.nNextPic;$(this.dPicList[t]).stop().fadeIn(500),this.dPicList[e].style.display="none",this.dPicNavMenu[t].className="sel",this.dPicNavMenu[e].className="",this.nCurrentPic=t,this.nNextPic=t<this.nPicNum-1?t+1:0}},fStart:function(){var e=this;this.oTimer=setTimeout(function(){e.fSwitch(),e.fStart()},this.nInterval)},fPause:function(){clearTimeout(this.oTimer)},fGoon:function(){clearTimeout(this.oTimer),this.fStart()},fGoto:function(e){var e=parseInt(e);return e==this.nCurrentPic?!1:(clearTimeout(this.oTimer),this.nNextPic=e,void this.fSwitch())}},window.fSwitchPic=e}();var switchVideo=function(e,t,n,i,o,a,r,s){var l="";t&&(l=t+"_"),"close"==n?($("#video_mini_show_"+l+e).show().next().show(),$("#video_content_"+l+e).html(""),$("#video_show_"+l+e).hide()):$.post(U("public/Feed/video_exist"),{id:e,flashvar:o,host:i},function(t){return 1!=t.status?(ui.error(t.msg),!1):void(i?($("div[id*='video_content_']").html(""),$("div[id*='video_show_']").hide(),$("div[id*='video_mini_show_']").show(),$("#video_mini_show_"+l+e).hide().next().hide(),$("#video_content_"+l+e).html(showFlash_online(i,o,r)),$("#video_show_"+l+e).show()):($("div[id*='video_content_']").html(""),$("div[id*='video_show_']").hide(),$("div[id*='video_mini_show_']").show(),$("#video_mini_show_"+l+e).hide().next().hide(),document.getElementById("video_content_"+l+e).innerHTML=showFlash_upload(i,o,a,r,s),$("#video_show_"+l+e).show()))},"json")},showFlash_online=function(e,t,n){"undefined"==typeof n&&(n=554);var i=Math.round(n/4*3.1);if("youtube.com"==e)var o='<iframe width="'+n+'" height="'+i+'"  src="http://www.youtube.com/embed/'+t+'" frameborder="0" allowfullscreen></iframe>';else var o='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+n+'" height="'+i+'" autostart="true"><param value="transparent" name="wmode"/><param value="'+t+'" name="movie" /><param value="autostart" name="true" /><embed src="'+t+'" wmode="transparent" allowfullscreen="true" type="application/x-shockwave-flash" style="width:'+n+"px;*width:"+n+"px;height:"+i+'px;" autostart="true"></embed></object>';return o},showFlash_upload=function(e,t,n,i,o){if(i=i||554,o=o||i,"youtube.com"==e)var a='<iframe width="'+i+'" height="'+o+'"  src="http://www.youtube.com/embed/'+t+'" frameborder="0" allowfullscreen></iframe>';else var r=THEME_URL+"/image/flowplayer-3.2.5.swf",a='<video id="example_video_1" class="video-js" width="'+i+'" height="'+o+'" controls="controls" preload="auto" autoplay="autoplay" poster="'+n+'"><source src="'+t+'" type="video/mp4" /><object id="flash_fallback_1" class="vjs-flash-fallback" width="'+i+'" height="'+o+'" type="application/x-shockwave-flash" data="'+r+'">  <param name="movie" value="'+r+'" />  <param name="allowfullscreen" value="true" />  <param name="flashvars" value=\'config={"playlist":["'+n+'", {"url": "'+t+'","autoPlay":true,"autoBuffering":true}]}\' />  <img src="'+n+'" width="'+i+'" height="'+o+'" alt="Poster Image" title="No video playback capabilities." /></object></video>';return a},revolving=function(e,t){var n=$("#image_index_"+t);n.rotate(e)},GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null};$(function(){$.fn.rotate=function(e){var t=$(this)[0],n=t.getAttribute("step");if(this.data("width")||$(this).data("height")||(this.data("width",t.width),this.data("height",t.height)),this.data("maxWidth",t.getAttribute("maxWidth")),null==n&&(n=0),"left"==e?0==n?n=3:n--:"right"==e&&(3==n?n=0:n++),t.setAttribute("step",n),document.all){if(this.data("height")>this.data("maxWidth")&&(1==n||3==n)?(this.data("zoomheight")||(this.data("zoomwidth",this.data("maxWidth")),this.data("zoomheight",this.data("maxWidth")/this.data("height")*this.data("width"))),t.height=this.data("zoomwidth"),t.width=this.data("zoomheight")):(t.height=this.data("height"),t.width=this.data("width")),t.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+n+")",8==$.browser.version)switch(n){case 0:this.parent().height("");break;case 1:this.parent().height(this.data("width")+10);break;case 2:this.parent().height("");break;case 3:this.parent().height(this.data("width")+10)}}else{var i=this.next("canvas")[0];0==this.next("canvas").length&&(this.css({visibility:"hidden",position:"absolute"}),i=document.createElement("canvas"),i.setAttribute("class","maxImg canvas"),t.parentNode.appendChild(i));var o=i.getContext("2d");switch(n){default:case 0:t.setAttribute("height",this.data("height")),t.setAttribute("width",this.data("width")),i.setAttribute("width",t.width),i.setAttribute("height",t.height),o.rotate(0*Math.PI/180),o.drawImage(t,0,0);break;case 1:t.height>this.data("maxWidth")?(h=this.data("maxWidth"),w=this.data("maxWidth")/t.height*t.width):(h=this.data("height"),w=this.data("width")),i.setAttribute("width",h),i.setAttribute("height",w),o.rotate(90*Math.PI/180),o.drawImage(t,0,-h,w,h);break;case 2:t.setAttribute("height",this.data("height")),t.setAttribute("width",this.data("width")),i.setAttribute("width",t.width),i.setAttribute("height",t.height),o.rotate(180*Math.PI/180),o.drawImage(t,-t.width,-t.height);break;case 3:t.height>this.data("maxWidth")?(h=this.data("maxWidth"),w=this.data("maxWidth")/t.height*t.width):(h=this.data("height"),w=this.data("width")),i.setAttribute("width",h),i.setAttribute("height",w),o.rotate(270*Math.PI/180),o.drawImage(t,-w,0,w,h)}}}}),function(e){var t=e.document,n=function(e,t){n.addFns(t),e&&n.nodes.init(e)};n.addFns=function(e){return e?(e.model&&n.addModelFns(e.model),e.event&&n.addEventFns(e.event),n):n},n.addModelFns=function(e){if("object"!=typeof e)return n;var t;for(t in e)n.nodes.models.fns[t]=e[t];return n},n.addEventFns=function(e){if("object"!=typeof e)return n;var t;for(t in e)n.nodes.events.fns[t]=e[t];return n},n.getArgs=function(e){return e.getAttribute("model-node")?n.getModelArgs(e):n.getEventArgs(e)},n.setArgs=function(e,t){return e.getAttribute("model-node")?n.setModelArgs(e,t):n.setEventArgs(e,t);
},n.getModelArgs=function(e,t){return e.args||(e.args=n.URI2Obj(e.getAttribute("model-args"))),e.args},n.setModelArgs=function(e,t){return e.args=void 0,e.setAttribute("model-args",t),n},n.getEventArgs=function(e){return e.args||(e.args=n.URI2Obj(e.getAttribute("event-args"))),e.args},n.setEventArgs=function(e,t){return e.args=void 0,e.setAttribute("event-args",t),n},n.URI2Obj=function(e){if(!e)return{};var t,n,i={},o=e.split("&");for(t=o.length;t-- >0;)n=o[t],n&&(n=n.split("="),i[n[0]]=n[1]);return i},n.getModels=function(e){return n.nodes.models[e]},n.getEvents=function(e){return n.nodes.events[e]},n.removeListener=function(e){return n.nodes.removeListener(e),n},n.addListener=function(e,t){return n.nodes.addListener(e,t),n},n.getPreviousModel=function(e,t){return n.nodes.getPreviousModel(e,t)},n.getNextModel=function(e,t){return n.nodes.getNextModel(e,t)},n.getPreviousEvent=function(e,t){return n.nodes.getPreviousEvent(e,t)},n.getNextEvent=function(e,t){return n.nodes.getNextEvent(e,t)},n.nodes={init:function(e){return this._init(e),this._onload.execute(),this},_init:function(e,t){var n,i,o,a=e.firstChild;switch(!t&&(t=this.getParentModel(e)),e.nodeName){case"DIV":case"UL":case"DL":case"FORM":case"LI":case"DD":i=e.getAttribute("model-node"),i&&(this._clearModel(e),e.modelName=i,this.addListener(e,this.models.fns[i]),e.parentModel=t,(t.childModels[i]=t.childModels[i]||[]).push(e),(this.models[i]=this.models[i]||[]).push(e),n=e);break;case"A":case"SPAN":case"LABEL":case"STRONG":case"INPUT":case"SELECT":case"BUTTON":case"IMG":case"TEXTAREA":case"H1":case"H2":case"H3":case"H4":case"I":o=e.getAttribute("event-node"),o&&(this._clearEvent(e),e.eventName=o,this.addListener(e,this.events.fns[o]),e.parentModel=t,(t.childEvents[o]=t.childEvents[o]||[]).push(e),(this.events[o]=this.events[o]||[]).push(e));break;case"HEAD":case"BODY":this[e.nodeName.toLowerCase()]=e;break;case"#document":this._clearModel(e)}for(!n&&(n=t);a;)1==a.nodeType&&this._init(a,n),a=a.nextSibling},_clearModel:function(e){return e.modelName=void 0,e.parentModel=void 0,e.childModels={},e.childEvents={},e.args=void 0,this},_clearEvent:function(e){return e.eventName=void 0,e.parentModel=void 0,e.args=void 0,this},getParentModel:function(e){var n,i=e.parentNode;return i&&1===i.nodeType&&(n=i.getAttribute("model-node")?i:this.getParentModel(i)),n||t},getPreviousModel:function(e,t){return this._getSiblingNode(e,{siblingType:"model",siblingName:t},"previous")},getNextModel:function(e,t){return this._getSiblingNode(e,{siblingType:"model",siblingName:t},"next")},getPreviousEvent:function(e,t){return this._getSiblingNode(e,{siblingType:"event",siblingName:t},"previous")},getNextEvent:function(e,t){return this._getSiblingNode(e,{siblingType:"event",siblingName:t},"next")},_getSiblingNode:function(e,t,n){var i;return e?(i=e[[n,"Sibling"].join("")],i&&t.siblingName===i[[t.siblingType,"Name"].join("")]?i:this._getSiblingNode(i,t,n)):null},addListener:function(e,n){if("object"==typeof n){var i;for(i in n)switch(i){case"load":e[i]=n[i],this._onload.queue.push(e);break;case"callback":e[i]=n[i];break;case"mouseenter":case"mouseleave":if(t.addEventListener){var o={mouseenter:"mouseover",mouseleave:"mouseout"};e["on"+o[i]]=function(t,n){return function(i){for(var o=i.relatedTarget;o&&o!=this;)try{o=o.parentNode}catch(i){break}o!=this&&(e[t]=n,e[t]())}}(i,n[i])}else e["on"+i]=n[i];break;default:e["on"+i]=n[i]}}},removeListener:function(e){return e.onclick=e.onfocus=e.onblur=e.onmouseout=e.onmouseover=e.onmouseenter=e.onmouserleave=e.onchange=null,this},_onload:{execute:function(){var e,t=this.queue.length;for(e=0;t>e;e++)this.queue[e].load(),this.queue[e].load=void 0;this.queue=[]},queue:[]},models:{fns:{}},events:{fns:{}},getHead:function(){return this.head||(this.head=t.getElementsByTagName("head")[0]),this.head},getBody:function(){return this.body||(this.body=t.getElementsByTagName("body")[0]),this.body}},n.getCSS=function(){var e=[];return function(i){for(var o,a=n.nodes.getHead(),r=0,s=e.length-1;s>=0;s--)r=e[s]==i?1:0;0==r&&(o=t.createElement("link"),o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",i),a.appendChild(o),e.push(i))}}(),n.getJS=function(){var e=[];return function(i,o){for(var a,r,s=0,l=e.length-1;l>=0;l--)s=e[l]==i?1:0;0==s?(e.push(i),a=n.nodes.getHead(),r=t.createElement("script"),r.setAttribute("src",i),"function"==typeof o&&(r.onload=r.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,o(),o=void 0,r=void 0)}),a.appendChild(r)):"function"==typeof o&&(o(),o=void 0)}}(),n.ready=function(e){"function"==typeof e&&(t.addEventListener?t.addEventListener("DOMContentLoaded",e,!1):t.attachEvent&&t.attachEvent("onreadystatechange",e))},e.M=n,M.ready(function(){M(t)})}(window),M.addModelFns({invite_colleague_form:{callback:function(e){ui.success(e.info),ui.box.close()}},drop_menu_list:{load:function(){var e=this.parentNode,t=this;$("body").bind("click",function(e){e=e||window.event;var t="undefined"!=typeof e.srcElement?e.srcElement:e.target,n=["search","notice","account","application"];for(var i in n){var o=$(t).parents('li[model-node="'+n[i]+'"]').get(0),a=$('li[model-node="'+n[i]+'"]').find('div[model-node="drop_menu_list"]').is(":hidden");if(void 0==o&&!a){var r=$('li[model-node="'+n[i]+'"]')[0];if("undefined"==typeof r)return;var s=r.className;r.className=s.replace(/(\s+drop)+(\s+|$)/g,""),"search"==n[i]&&$('li[model-node="'+n[i]+'"]').find('div[model-node="drop_menu_list"]').stop().animate({width:0},"normal",function(){$(this)[0].style.display="none"})}}}),"notice"===$(e).attr("model-node")?M.addListener(e,{click:function(e){ui.box.load(U("public/Index/messageBox"),null)}}):"search"===$(e).attr("model-node")?M.addListener(e,{click:function(e){e=e||window.event;var n="undefined"!=typeof e.srcElement?e.srcElement:e.target;if("search-btn"!==$(n).attr("rel"))return!1;var i=t.style.display,o=this.className;""===i||"none"===i?(this.className=[o," drop"].join(""),t.style.display="block",$(t).stop().animate({width:178},"normal"),$("#search_input").focus()):(this.className=o.replace(/(\s+drop)+(\s+|$)/g,""),$(t).stop().animate({width:0},"normal",function(){t.style.display="none"}))}}):"account"===$(e).attr("model-node")?M.addListener(e,{click:function(e){e=e||window.event;var n="undefined"!=typeof e.srcElement?e.srcElement:e.target;if("account-btn"!==$(n).attr("rel"))return!0;var i=t.style.display,o=this.className;""===i||"none"===i?(this.className=[o," drop"].join(""),$(t).show(),$(t).stop().animate({opacity:1},"fast")):"all"!=$(n).attr("rel")&&(this.className=o.replace(/(\s+drop)+(\s+|$)/g,""),$(t).stop().animate({opacity:0},"fast",function(){$(t).hide()}))},mouseover:function(e){e=e||window.event;var n="undefined"!=typeof e.srcElement?e.srcElement:e.target;if("account-btn"!==$(n).attr("rel"))return!0;var i=(t.style.display,this.className);i=i.replace(/(\s+drop)+(\s+|$)/g,""),this.className=[i," drop"].join(""),$(t).show(),$(t).stop().animate({opacity:1},"fast")},mouseleave:function(e){var n=this.className;this.className=n.replace(/(\s+drop)+(\s+|$)/g,""),$(t).stop().animate({opacity:0},"fast",function(){$(t).hide()})}}):"application"===$(e).attr("model-node")?M.addListener(e,{click:function(e){e=e||window.event;var n="undefined"!=typeof e.srcElement?e.srcElement:e.target;if("application-btn"!==$(n).attr("rel"))return!0;var i=t.style.display,o=this.className;""===i||"none"===i?(this.className=[o," drop"].join(""),$(t).show(),$(t).stop().animate({opacity:1},"fast")):"all"!=$(n).attr("rel")&&(this.className=o.replace(/(\s+drop)+(\s+|$)/g,""),$(t).stop().animate({opacity:0},"fast",function(){$(t).hide()}))},mouseover:function(e){e=e||window.event;var n="undefined"!=typeof e.srcElement?e.srcElement:e.target;if("application-btn"!==$(n).attr("rel"))return!0;var i=(t.style.display,this.className);i=i.replace(/(\s+drop)+(\s+|$)/g,""),this.className=[i," drop"].join(""),$(t).show(),$(t).stop().animate({opacity:1},"fast")},mouseleave:function(e){var n=this.className;this.className=n.replace(/(\s+drop)+(\s+|$)/g,""),$(t).stop().animate({opacity:0},"fast",function(){$(t).hide()})}}):M.addListener(e,{mouseenter:function(){var e=this.className;this.className=[e," drop"].join(""),t.style.display="block"},mouseleave:function(){var e=this.className;this.className=e.replace(/(\s+drop)+(\s+|$)/g,""),t.style.display="none"}})}},search_icon:{mouseleave:function(){},click:function(){return"yes"==$(".search_footer").attr("ison")?($(".search_footer").attr("ison","no"),$(".search_footer").hide(),!0):($(".search_footer").attr("ison","yes"),void $(".search_footer").show())}},search_menu_footer:{click:function(){var e=$(this).offset();$("#search_menu").css({left:e.left+"px",top:e.top-35+"px",width:"81px"}).show(),$("#search_menu").attr("ison","yes")},mouseleave:function(){},blur:function(){core.search.dohide()}},search_menu:{click:function(){var e=$(this).offset();$("#search_menu").css({left:e.left+"px",top:e.top+$(this).height()+12+"px",width:"81px"}).show(),$("#search_menu").attr("ison","yes")},mouseleave:function(){setTimeout(core.search.hideMenu,300)},blur:function(){core.search.dohide()}},search_menu_ul:{mouseleave:function(){$(".search_footer").attr("ison","yes"),core.search.dohide()},mouseenter:function(){core.search.doshow()}},search_footer:{mouseleave:function(){},mouseenter:function(){$(this).attr("ison","yes")}},drop_search:{load:function(){core.plugInit("search"),$(this.childEvents.searchKey[0]).focus(function(){core.search.searchInit(this)})}},wigdet_setform:{callback:function(e){core.widget.afterSet(e)}},diy_widget:{load:function(e){var t=this.childModels.widget_box,n=this,i=M.getModelArgs(this);core.plugFunc("widget",function(){core.loadFile(THEME_URL+"/js/ui.sortable.js",function(){$(n).sortable({items:".ui-state-disabled",placeholder:"ui-selected",revert:.01,helper:"clone",update:function(){core.widget.dosort(i,n)}}),$(t).disableSelection()})})}}}),M.addEventFns({widget_toggle:{click:function(){$(this.parentModel.childModels.widget_child[0]).toggle("500")}},widget_setup:{click:function(){$(this.parentModel.childModels.wigdet_setbox[0]).toggle("500")}},widget_cancel_set:{click:function(){$(this.parentModel).hide("500")}},widget_close:{click:function(){var e=M.getModelArgs(this.parentModel);core.widget.removeWidget(this,e,this.parentModel)}},widget_add:{click:function(){var e=M.getEventArgs(this);core.widget.addWidget(e)}},invite_colleague:{click:function(){return ui.box.load(this.href,L("PUBLIC_INVITE_COLLEAGUE")),!1}},invite_addemail:{click:function(){var e=(document.getElementById("email_input").value,$("#email_input")),t=this.parentModel.childEvents.email[0],n=t.cloneNode(!0);return n.value="",e.append(n),M(n),!1}},face_card:{load:function(){core.plugInit("facecard")},mouseenter:function(){var e=$(this).attr("uid");if(MID<1||MID==e||UID==e)return!1;var t=$(this);"undefined"==typeof core.facecard?core.plugFunc("facecard",function(){core.facecard.show(t,e)}):core.facecard.show(t,e)},mouseleave:function(){return MID<1?!1:void core.facecard.hide()},blur:function(){core.facecard.hide()}},more_person_info:{click:function(){var e;if(e=this.parentNode,e.style.display="block","hide"==$(this).attr("rel")){var t="block";$(this).attr("rel","show"),$(".mod-person .person-info a").text(L("PUBLIC_PUT")+"↑")}else{var t="none";$(this).attr("rel","hide"),$(".mod-person .person-info a").text(L("PUBLIC_OPEN_MORE")+"↓")}for(;e=e.nextSibling;)"LI"===e.tagName&&(e.style.display=t);return!1}},ico_wallet:{mouseenter:function(){this._model.style.display="block"},mouseleave:function(){this._model.style.display="none"},load:function(){var e=M.getModels("layer_wallet");this._model=e[0]}},ico_level:{mouseenter:function(){this._model.style.display="block"},mouseleave:function(){this._model.style.display="none"},load:function(){var e=M.getModels("layer_level");this._model=e[0]}},open_share:{click:function(){if(0==MID)return void ui.quicklogin();var e=this;core.plugFunc("bdshare",function(){core.bdshare.feedlist(e)})}},share:{click:function(){var e=M.getEventArgs(this),t=e.sid,n=e.stable,i=e.initHTML,o=e.curtable,a=e.curid,r=e.appname,s=e.cancomment,l=e.is_repost;return share(t,n,i,a,o,r,s,l),!1}},share_to_feed:{load:function(){var e=M.getEventArgs(this);if(1==e.isLoad){var t=e.initHTML,n=e.attachId,i=e.from,o=e.appname,a=e.url,r=U("public/Share/shareToFeed")+"&initHTML="+t+"&attachId="+n+"&from="+i+"&appname="+o+"&source_url="+a;ui.box.load(r,"分享")}return!1},click:function(){var e=M.getEventArgs(this),t=e.initHTML,n=e.attachId,i=e.from,o=e.appname,a=e.url,r=U("public/Share/shareToFeed")+"&initHTML="+t+"&attachId="+n+"&from="+i+"&appname="+o+"&source_url="+a;return ui.box.load(r,"分享"),!1}},setremark:{click:function(){var e=$(this).attr("remark"),t=$(this).attr("uid");ui.box.load(U("widget/Remark/edit")+"&remark="+e+"&uid="+t,L("PUBLIC_EDIT_FOLLWING"))}},doFollowSpace:{click:function(){return followSpace.doFollow(this),!1},load:function(){followSpace.createBtn(this)}},unFollowSpace:{click:function(){return followSpace.unFollow(this),!1},load:function(){followSpace.createBtn(this)}},setFollowGroup:{click:function(){var e=M.getEventArgs(this);followSpace.setFollowGroup(this,e.fid)}},doFollow:{click:function(){return follow.doFollow(this),!1},load:function(){follow.createBtn(this)}},unFollow:{click:function(){return follow.unFollow(this),!1},load:function(){follow.createBtn(this)}},setFollowGroup:{click:function(){var e=M.getEventArgs(this);follow.setFollowGroup(this,e.fid)}},follow_check:{click:function(e){var t=this.getElementsByTagName("input")[0];return setTimeout(function(){t.checked=!t.checked,t=void 0},1),!1}},newDoFollow:{click:function(){return NewFollow.doFollow(this),!1}},setFollowGroup:{click:function(){v;var e=M.getEventArgs(this);NewFollow.setFollowGroup(this,e.fid)}},follow_check:{click:function(e){var t=this.getElementsByTagName("input")[0];return setTimeout(function(){t.checked=!t.checked,t=void 0},1),!1}},doUnion:{click:function(){return union.doUnion(this),!1},load:function(){union.createBtn(this)}},unUnion:{click:function(){return union.unUnion(this),!1},load:function(){union.createBtn(this)}},doFollowWeiba:{click:function(){return followweiba.doFollow(this),!1},load:function(){followweiba.createBtn(this)}},unFollowWeiba:{click:function(){return followweiba.unFollow(this),!1},load:function(){followweiba.createBtn(this)}},setFollowGroup:{click:function(){var e=M.getEventArgs(this);follow.setFollowGroup(this,e.fid)}},follow_check:{click:function(e){var t=this.getElementsByTagName("input")[0];return setTimeout(function(){t.checked=!t.checked,t=void 0},1),!1}},comment:{click:function(){var e=M.getEventArgs(this),t=this.parentModel.childModels.comment_detail[0];return e.sourceObject=this,core.comment.init(e,t),core.comment.display(),!1}},reply_comment:{click:function(){var e=M.getEventArgs(this),t=this.parentModel.parentModel,n=t.childModels.comment_textarea[0].childEvents.do_comment[0];$(n).attr("to_comment_id",e.to_comment_id),$(n).attr("to_uid",e.to_uid),$(n).attr("to_comment_uname",e.to_comment_uname),core.plugFunc("comment",function(){core.comment.init(e,t),core.comment.initReply()})}},comment_del:{click:function(){var e=M.getEventArgs(this);$(this.parentModel).fadeOut("normal",function(){var e=$(this).parent();if(e.length>0){var t=(parseInt(e.attr("id").split("_")[1]),e.find("dl:visible")),n=parseInt(t.eq(0).find("span.floor").html());t.each(function(e,t){$(this).find("span.floor").html(n-e+"楼")})}}),"undefined"==typeof core.comment?core.plugFunc("comment",function(){core.comment.delComment(e.comment_id)}):core.comment.delComment(e.comment_id)}},do_comment:{click:function(){if(1!=this.noreply){var e=M.getEventArgs(this);e.to_comment_id=$(this).attr("to_comment_id"),e.to_uid=$(this).attr("to_uid"),e.to_comment_uname=$(this).attr("to_comment_uname"),e.addToEnd=$(this).attr("addtoend");var t=this.parentModel.parentModel;core.comment.init(e,t);var n=this,i=function(){$(n).attr("to_uid","0"),$(n).attr("to_comment_id","0"),$(n).attr("to_comment_uname",""),1==e.closeBox&&(ui.box.close(),ui.success(L("PUBLIC_CENTSUCCESS")))};core.comment.addComment(i,this),this.noreply=1,setTimeout(function(){n.noreply=0},5e3)}},load:function(){var e=M.getEventArgs(this);e.to_comment_id=$(this).attr("to_comment_id"),e.to_uid=$(this).attr("to_uid"),e.to_comment_uname=$(this).attr("to_comment_uname"),e.addToEnd=$(this).attr("addtoend"),e.talkbox=$(this).attr("talkbox");var t=this.parentModel.parentModel;core.plugInit("comment",e,t)}},comment_insert_face:{click:function(){var e=this.parentModel.childModels.mini_editor[0],t=this.parentModel.childModels.faceDiv[0];0==$(e).find("textarea").size()?core.plugInit("face",this,$(e).find("input:eq(0)"),t):core.plugInit("face",this,$(e).find("textarea"),t)}},messasge_reply_comment:{click:function(){var e=M.getEventArgs(this),t=this.parentModel.childModels.comment_detail[0];e.sourceObject=this,core.comment.init(e,t),core.comment.display(function(e){"show"==e&&core.comment.initReply()})}},showCategory:{click:function(){var e=M.getEventArgs(this),t=this;core.plugFunc("category",function(){core.category.loadSelect(t,e.model_name,e.app_name,e.method,e.id,e.inputname,e.callback)})}},show_url_detail:{mouseover:function(){$(this).parent().find(".url-detail").show()},mouseout:function(){$(this).parent().find(".url-detail").hide()}}});var share=function(e,t,n,i,o,a,r,s){if(0==MID)return void ui.quicklogin();"undefined"==typeof r&&(r=0);var l=U("public/Share/index")+"&sid="+e+"&stable="+t+"&curid="+i+"&curtable="+o+"&appname="+a+"&initHTML="+n+"&cancomment="+r+"&is_repost="+s;return ui.box.load(l,L("PUBLIC_SHARE"),function(){$("#at-view").hide();var e="feed"+i;window.location.hash=e}),!1},follow={btnClass:{doFollow:"btns-red",unFollow:"btns-red",haveFollow:"btns-gray",eachFollow:"btns-gray"},flagClass:{doFollow:"ico-add",unFollow:"ico-minus",haveFollow:"ico-already",eachFollow:"ico-connect"},btnText:{doFollow:"关注",unFollow:"取消关注",haveFollow:"已关注",eachFollow:"相互关注"},createBtn:function(e,t){var n=M.getEventArgs(e),t=0==n.following?"doFollow":0==n.follower?"haveFollow":"eachFollow",i=this.btnClass[t],o=this.flagClass[t],a=this.btnText[t],r=['<span><b class="',o,'"></b>',a,"</span>"].join("");switch(e.innerHTML=r,e.className=i,t){case"haveFollow":case"eachFollow":$(e).bind({mouseover:function(){var e=this.getElementsByTagName("b")[0],t=e.nextSibling;this.className=follow.btnClass.unFollow,e.className=follow.flagClass.unFollow,t.nodeValue=follow.btnText.unFollow},mouseout:function(){var e=this.getElementsByTagName("b")[0],t=e.nextSibling;this.className=i,e.className=o,t.nodeValue=a}});break;default:$(e).unbind("mouseover"),$(e).unbind("mouseout")}},doFollow:function(e){if(0==MID)return void ui.quicklogin();var t=this,n=M.getEventArgs(e),i=e.getAttribute("href")||U("public/Follow/doFollow");$.post(i,{fid:n.uid},function(i){if(1==i.status)if("undefined"!=typeof core.facecard&&core.facecard.deleteUser(n.uid),t.updateFollowCount(1),updateUserData("follower_count",1,n.uid),"following_right"==n.refer){var o=e.parentModel;$(o).fadeOut("normal",function(){$(this).remove()}),$.post(U("widget/RelatedUser/changeRelate"),{uid:n.uid,limit:1},function(e){var t=M.getModels("related_ul_user");$(t[0]).append(e),M(t[0])},"json"),ui.success("关注成功")}else e.setAttribute("event-node","unFollow"),e.setAttribute("href",[U("public/Follow/unFollow"),"&fid=",n.uid].join("")),M.setEventArgs(e,["uid=",n.uid,"&uname=",n.uname,"&following=",i.data.following,"&follower=",i.data.follower].join("")),M.removeListener(e),M(e),ui.success("关注成功");else ui.error(i.info)},"json")},setFollowGroup:function(e,t){var n=U("public/FollowGroup/selectorBox")+"&fid="+t;ui.box.load(n,L("PUBLIC_SET_GROUP"))},unFollow:function(node){var _this=this,args=M.getEventArgs(node),url=node.getAttribute("href")||U("public/Follow/unFollow");$.post(url,{fid:args.uid},function(txt){if(txt=eval("("+txt+")"),1==txt.status){if("undefined"!=typeof core.facecard&&core.facecard.deleteUser(args.uid),"following_list"==args.refer){var item=node.parentModel;item.parentNode.removeChild(item)}else node.setAttribute("event-node","doFollow"),node.setAttribute("href",[U("public/Follow/doFollow"),"&fid=",args.uid].join("")),M.setEventArgs(node,["uid=",args.uid,"&uname=",args.uname,"&following=",txt.data.following,"&follower=",txt.data.follower].join("")),M.removeListener(node),M(node);_this.updateFollowCount(-1),updateUserData("follower_count",-1,args.uid),ui.success("取消成功")}else ui.error(txt.info)})},updateFollowCount:function(e){var t,n=M.getEvents("following_count");if(n)for(t=n.length;t-- >0;)n[t].innerHTML=parseInt(n[t].innerHTML)+e}},followSpace={btnClass:{doFollow:"pay-attention",unFollow:"pay-attention-hover",haveFollow:"pay-attention",eachFollow:"pay-attention"},flagClass:{doFollow:"i-pay-attention",unFollow:"ico-minus",haveFollow:"ico-already",eachFollow:"ico-connect"},btnText:{doFollow:"关注",unFollow:"取消关注",haveFollow:"已关注",eachFollow:"相互关注"},createBtn:function(e,t){var n=M.getEventArgs(e),t=0==n.following?"doFollow":0==n.follower?"haveFollow":"eachFollow",i=this.btnClass[t],o=this.flagClass[t],a=this.btnText[t],r=['<span><b class="',o,'"></b>',a,"</span>"].join("");switch(e.innerHTML=r,e.className=i,t){case"haveFollow":case"eachFollow":$(e).bind({mouseover:function(){var e=this.getElementsByTagName("b")[0],t=e.nextSibling;this.className=followSpace.btnClass.unFollow,e.className=followSpace.flagClass.unFollow,t.nodeValue=followSpace.btnText.unFollow},mouseout:function(){var e=this.getElementsByTagName("b")[0],t=e.nextSibling;this.className=i,e.className=o,t.nodeValue=a}});break;default:$(e).unbind("mouseover"),$(e).unbind("mouseout")}},doFollow:function(e){if(0==MID)return void ui.quicklogin();var t=this,n=M.getEventArgs(e),i=e.getAttribute("href")||U("public/Follow/doFollow");$.post(i,{fid:n.uid},function(i){1==i.status?("undefined"!=typeof core.facecard&&core.facecard.deleteUser(n.uid),e.setAttribute("event-node","unFollowSpace"),e.setAttribute("href",[U("public/Follow/unFollow"),"&fid=",n.uid].join("")),M.setEventArgs(e,["uid=",n.uid,"&uname=",n.uname,"&following=",i.data.following,"&follower=",i.data.follower].join("")),M.removeListener(e),M(e),t.updateFollowCount(1),updateUserData("follower_count",1,n.uid),ui.success("关注成功")):ui.error(i.info)},"json")},setFollowGroup:function(e,t){var n=U("public/FollowGroup/selectorBox")+"&fid="+t;ui.box.load(n,L("PUBLIC_SET_GROUP"))},unFollow:function(node){var _this=this,args=M.getEventArgs(node),url=node.getAttribute("href")||U("public/Follow/unFollow");$.post(url,{fid:args.uid},function(txt){if(txt=eval("("+txt+")"),1==txt.status){if("undefined"!=typeof core.facecard&&core.facecard.deleteUser(args.uid),"following_list"==args.refer){var item=node.parentModel;item.parentNode.removeChild(item)}else node.setAttribute("event-node","doFollowSpace"),node.setAttribute("href",[U("public/Follow/doFollow"),"&fid=",args.uid].join("")),M.setEventArgs(node,["uid=",args.uid,"&uname=",args.uname,"&following=",txt.data.following,"&follower=",txt.data.follower].join("")),M.removeListener(node),M(node);_this.updateFollowCount(-1),updateUserData("follower_count",-1,args.uid),ui.success("取消成功")}else ui.error(txt.info)})},updateFollowCount:function(e){var t,n=M.getEvents("following_count");if(n)for(t=n.length;t-- >0;)n[t].innerHTML=parseInt(n[t].innerHTML)+e}},NewFollow={doFollow:function(e){if(0==MID)return void ui.quicklogin();var t=M.getEventArgs(e),n=e.getAttribute("href")||U("public/Follow/doFollow");$.post(n,{fid:t.uid},function(n){if(1==n.status)if("undefined"!=typeof core.facecard&&core.facecard.deleteUser(t.uid),"following_right"==t.refer){var i=e.parentModel;$(i).slideUp("normal",function(){$(this).remove()}),$.post(U("widget/RelatedUser/changeRelate"),{uid:t.uid,limit:1},function(e){var t=M.getModels("related_ul");$(t[0]).append(e),M(t[0])},"json"),ui.success("关注成功"),setTimeout(window.location.reload(),300)}else $(e).remove(),ui.success("关注成功");else ui.error(n.info)},"json")},setFollowGroup:function(e,t){var n=U("public/FollowGroup/selectorBox")+"&fid="+t;ui.box.load(n,L("PUBLIC_SET_GROUP"))}},union={btnClass:{doUnion:"post-union",unUnion:"btn-att-white",haveUnion:"btn-att-white",eachUnion:"btn-att-white"},flagClass:{doUnion:"i-post-union",unUnion:"ico-minus-gray",haveUnion:"ico-already",eachUnion:"ico-connect"},btnText:{doUnion:"发起联盟",unUnion:"取消联盟",haveUnion:"申请中",eachUnion:"已联盟"},createBtn:function(e,t){var n=M.getEventArgs(e),t=0==n.unioning?"doUnion":0==n.unioner?"haveUnion":"eachUnion",i=this.btnClass[t],o=this.flagClass[t],a=this.btnText[t],r=['<span><b class="',o,'"></b>',a,"</span>"].join("");switch(e.innerHTML=r,e.className=i,console.log(t),t){case"haveUnion":case"eachUnion":$(e).bind({mouseover:function(){var e=this.getElementsByTagName("b")[0],t=e.nextSibling;this.className=union.btnClass.unUnion,e.className=union.flagClass.unUnion,t.nodeValue=union.btnText.unUnion},mouseout:function(){var e=this.getElementsByTagName("b")[0],t=e.nextSibling;this.className=i,e.className=o,t.nodeValue=a}});break;default:$(e).unbind("mouseover"),$(e).unbind("mouseout")}},doUnion:function(e){var t=this,n=M.getEventArgs(e),i=e.getAttribute("href")||U("public/Union/doUnion");$.post(i,{fid:n.uid},function(i){if(1==i.status){if("undefined"!=typeof core.facecard&&core.facecard.deleteUser(n.uid),e.setAttribute("event-node","unUnion"),e.setAttribute("href",[U("public/Union/unUnion"),"&fid=",n.uid].join("")),M.setEventArgs(e,["uid=",n.uid,"&uname=",n.uname,"&unioning=",i.data.unioning,"&unioner=",i.data.unioner].join("")),M.removeListener(e),M(e),t.updateUnionCount(1),updateUserData("unioner_count",1,n.uid),"unioning_right"==n.refer){var o=e.parentModel;$(o).slideUp("normal",function(){$(this).remove()}),$.post(U("widget/RelatedUser/changeRelate"),{uid:n.uid,limit:1},function(e){var t=M.getModels("related_ul");$(t[0]).append(e),M(t[0])},"json"),ui.success("联盟成功")}}else ui.error(i.info)},"json")},setUnionGroup:function(e,t){var n=U("public/UnionGroup/selectorBox")+"&fid="+t;ui.box.load(n,L("PUBLIC_SET_GROUP"))},unUnion:function(node){var _this=this,args=M.getEventArgs(node),url=node.getAttribute("href")||U("public/Union/unUnion");$.post(url,{fid:args.uid},function(txt){if(txt=eval("("+txt+")"),1==txt.status){if(ui.success(txt.info),"undefined"!=typeof core.facecard&&core.facecard.deleteUser(args.uid),"unioning_list"==args.refer){var item=node.parentModel;item.parentNode.removeChild(item)}_this.updateUnionCount(-1),updateUserData("unioner_count",-1,args.uid),1==args.isrefresh&&location.reload()}else ui.error(txt.info)})},updateUnionCount:function(e){var t,n=M.getEvents("unioning_count");if(n)for(t=n.length;t-- >0;)n[t].innerHTML=parseInt(n[t].innerHTML)+e}},followGroupSelectorList=function(e,t){var n=e.offset();$.post(U("public/FollowGroup/selectorList"),{fid:t},function(i){$("#followGroupList").length>0?$("#followGroupList").attr("rel")==t?$("#followGroupList").remove():($("#followGroupList").attr("rel",t),$("#followGroupList").html(i)):$("body").append('<div id="followGroupList" rel="'+t+'" class="layer-follow-list">'+i+"</div>");var o=$(window).width()-n.left-e.width();$("#followGroupList").css({right:o+"px",top:n.top+e.height()+8+"px",display:"block"}),$("#followGroupSelector").find("label").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$("body").bind("click",function(e){var t="undefined"!=typeof e.srcElement?e.srcElement:e.target,n=$("#followGroupList").find(t).length;0===n&&$("#followGroupList").remove()})})},followGroupSelectorBox=function(e,t){if(1==t)var n="location.reload();";else var n="";ui.box.load(U("public/FollowGroup/selectorBox")+"&fid="+e+"&isrefresh="+t,L("PUBLIC_FOLLOWING_SUCCESS"),n)},setFollowGroup=function(e,t){if(1==t)var n="location.reload();";else var n="";ui.box.load(U("public/FollowGroup/selectorBox")+"&fid="+e+"&isrefresh="+t,"设置分组",n)},followGroupSelectorClose=function(e){$(".followGroupStatus"+e).hide(),$(".followGroupStatus"+e).html("")},setFollowGroupTab=function(e){var t=L(e?"PUBLIC_EDIT_GROUP":"PUBLIC_CREATE_GROUP");e=e?"&gid="+e:"",ui.box.load(U("public/FollowGroup/setGroupTab")+e,t)},message={};message.init=function(){this.hashUrl={msg:U("public/Message/notify"),at:U("public/Mention/index"),com:U("public/Comment/index"),pmsg:U("public/Message/index")}},message.changeTab=function(e){$li=$('li[model-node="notice"]').find('li[rel="notice_'+e+'"]'),$ul=$li.parent(),$ul.find("li").removeClass("current"),$li.addClass("current"),message.getMessage(e);var t=$li.find("a.num"),n=parseInt(t.html());if(!isNaN(n)){t.remove();var i=$('li[model-node="notice"] > a.num'),o=parseInt(i.html()),a=o-n;0>=a?i.remove():i.html(a)}},message.getMessage=function(e){message.init(),$dl=$('ul[rel="message_content"]'),$dl.html('<p class="loadding"><img src="'+THEME_URL+'/image/icon_waiting.gif" /></p>'),$.get(U("public/Index/getMessage"),{type:e},function(t){if(1==t.status){var n=$("<div></div>").html(t.data.html);n.children().last().addClass("no-border"),$dl.html(n.html()),setTimeout(function(){("at"===e||"com"===e||"pmsg"===e)&&$dl.find("li").bind("click",function(){var t=parseInt($(this).attr("source-id"));return 0==t?!1:void ui.box.load(U("public/Index/showTalkBox")+"&id="+t+"&t="+e,"对话")})},500)}else $dl.html(t.info)},"json"),$('p[rel="message_footer"] a').attr("href",message.hashUrl[e]),"pmsg"==e?($('p[rel="message_footer"] a[event-node="postMsg"]').show(),M($('p[rel="message_footer"]')[0])):$('p[rel="message_footer"] a[event-node="postMsg"]').hide()},message.whichChangeTab=function(){var e="",t={msg:0,at:0,com:0,pmsg:0};for(var n in t){var i=parseInt($('li[model-node="notice"]').find('li[rel="notice_'+n+'"]').find("a.num").text());if(isNaN(i)&&(i=0),t[n]=i,0!=i){e=n;break}"pmsg"==n&&0==i&&(e="at")}return e},message.at=function(e,t,n){var i=U("public/Index/messageContent");"undefined"!=typeof n&&(i=U("public/Index/messageContent")+"&p="+n),message.nav(e),$.post(i,{type:e,t:t},function(e){e&&$(".main-right.minH").html(e.data.html)},"json")},message.comment=function(e,t,n,i){var o=U("public/Index/messageContent");"undefined"!=typeof i&&(o=U("public/Index/messageContent")+"&p="+i),message.nav(e),$.post(o,{type:e,t:t,stype:n},function(e){e&&$(".main-right.minH").html(e.data.html)},"json")},message.notify=function(e,t,n){var i=U("public/Index/messageContent");"undefined"!=typeof n&&(i=U("public/Index/messageContent")+"&p="+n),"digg"==t?message.nav("digg"):message.nav("system"),$.post(i,{type:e,t:t},function(e){e&&$(".main-right.minH").html(e.data.html)},"json")},message.messageList=function(e,t){var n=U("public/Index/messageContent");"undefined"!=typeof t&&(n=U("public/Index/messageContent")+"&p="+t),message.nav(e),$.post(n,{type:e},function(e){e&&$(".main-right.minH").html(e.data.html)},"json")},message.messageDetail=function(e,t,n){message.nav("message"),$.post(U("public/Index/messageContent"),{type:e,stype:t,id:n},function(e){e&&$(".main-right.minH").html(e.data.html)},"json")},message.delMessage=function(e){return e=e?e:getChecked(),e=e.toString(),""==e?!1:($.post(U("public/Message/doDelete"),{ids:e},function(t){if("1"==t){for(ui.success("删除成功"),e=e.split(","),i=0;i<e.length;i++)$("#message_"+e[i]).remove();var n=$("#message_list_count"),o=parseInt(n.html());n.html(o-e.length)}else ui.error("删除失败")}),!1)},message.nav=function(e){$("dl .current").removeClass("current"),$("dl").find("#"+e).addClass("current");var t=$("dl").find("#"+e+" a i.num");if(t.size()){var n=parseInt(t.text());if(n>0){var i=new RegExp(_CP+"unread_message=(\\d+)"),o=document.cookie.match(i);o&&o[1]>0&&(document.cookie=_CP+"unread_message="+(o[1]-n))}}t.remove()},message.page=function(e){var t=$(e).text();"下一页"==t&&(t=parseInt($(e).parent().find(".current").text())+1),"上一页"==t&&(t=parseInt($(e).parent().find(".current").text())-1);var n=$("#type").val();if("at"==n){var i=$("#t").val();message.at(n,i,t)}else if("comment"==n){var i=$("#t").val(),o=$("#stype").val();
message.comment(n,i,o,t)}else if("message"==n)message.messageList(n,t);else if("notify"==n){var i=$("#t").val();message.notify(n,i,t)}},function(){jWidget={version:"1.0.0",each:function(e,t){var n,i=0,o=t;if("[object Array]"===Object.prototype.toString.call(e))if(e.forEach)e.forEach(t);else for(var a=e.length;a>i;)o(e[i],i,e),++i;else for(n in e)o(e[n],n,e);return!0},extend:function(e,t){e&&t&&"object"==typeof t&&this.each(t,function(t,n){e[n]=t})}};var e=document.defaultView&&document.defaultView.getComputedStyle;jWidget.dom={get:function(e){return"string"==typeof e?document.getElementById(e):e},getFirstChild:function(e){e=this.get(e);var t=e.firstChild&&1==e.firstChild.nodeType?e.firstChild:null;return t||this.getNextSibling(e.firstChild)},getNextSibling:function(e){for(e=this.get(e);e;)if(e=e.nextSibling,e&&1==e.nodeType)return e;return null},getChildren:function(e){for(var t=[],e=this.getFirstChild(e);e;)e&&1==e.nodeType&&t.push(e),e=e.nextSibling;return t},getSize:function(e){var t=[0,0];return e?(jWidget.each(["Left","Right","Top","Bottom"],function(n){t["Left"==n||"Right"==n?0:1]+=(parseInt(jWidget.dom.getStyle(e,"border"+n+"Width"),10)||0)+(parseInt(jWidget.dom.getStyle(e,"padding"+n),10)||0)}),[e.offsetWidth-t[0],e.offsetHeight-t[1]]):[-1,-1]},getStyle:function(t,n){if(t=this.get(t),!t||9==t.nodeType)return null;var i=e?document.defaultView.getComputedStyle(t,""):null;switch(n){case"float":n=e?"cssFloat":"styleFloat";break;case"opacity":if(e)return parseFloat((i||t.style)[n]);var o=100;try{o=t.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(a){try{o=t.filters("alpha").opacity}catch(a){}}return o/100}return e?(i||t.style)[n]:t.currentStyle[n]||t.style[n]},setStyle:function(t,n,i){if(t=this.get(t),!t||9==t.nodeType)return!1;switch(n){case"float":n=e?"cssFloat":"styleFloat";case"opacity":return e?(t.style[n]=i,!0):i>=1?void(t.style.filter=""):(t.style.filter="alpha(opacity="+100*i+")",!0);default:return"undefined"==typeof t.style[n]?!1:(t.style[n]=i,!0)}},hasClass:function(e,t){return e&&t?new RegExp("\\b"+t+"\\b").test(e.className):!1},addClass:function(e,t){if(e&&t){if(e.className){if(jWidget.dom.hasClass(e,t))return!1;e.className+=" "+t}else e.className=t;return!0}return!1},removeClass:function(e,t){if(e&&t&&e.className){var n=e.className;return e.className=e.className.replace(new RegExp("\\b"+t+"\\b"),""),e.className!=n}return!1}},jWidget.ui=jWidget.ui||{}}(),function(){var e=jWidget,t=e.dom;_Slide=function(e){e=e||{},this.eventType=e.eventType||"mouseover",this.autoPlayInterval=e.autoPlayInterval||3e3,this._play=!0,this._timer=null,this._fadeTimer=null,this._container=t.get(e.container),this._panelWrapper=t.get(e.panelWrapper)||t.getFirstChild(this._container),this._sliders=t.getChildren(this._panelWrapper),this._navWrapper=t.get(e.navWrapper)||t.getNextSibling(this._panelWrapper)||null,this._navs=this._navWrapper&&t.getChildren(this._navWrapper)||null,this._effect=e.effect||"scrollx",this._panelSize=(-1==this._effect.indexOf("scrolly")?e.width:e.height)||t.getSize(t.getFirstChild(this._panelWrapper))[-1==this._effect.indexOf("scrolly")?0:1],this._count=e.count||t.getChildren(this._panelWrapper).length,this._navClassOn=e.navClassOn||"on",this._target=0,this._changeProperty=-1==this._effect.indexOf("scrolly")?"left":"top",this.curIndex=0,this.step=-1==this._effect.indexOf("scroll")?1:e.Step||5,this.slideTime=e.slideTime||10,this.init(),this.run(!0)},_Slide.prototype={init:function(){t.setStyle(this._container,"overflow","hidden"),t.setStyle(this._container,"position","relative"),t.setStyle(this._panelWrapper,"position","relative");var n=this;[t.getStyle(this._container,"width"),t.getStyle(this._container,"height")];-1==this._effect.indexOf("scrolly")?(this._panelSize=this._container.offsetWidth,t.setStyle(this._panelWrapper,"width",this._count*(this._panelSize+200)+"px"),e.each(this._sliders,function(e){e.style.styleFloat=e.style.cssFloat="left",t.getFirstChild(t.getFirstChild(e)).width=n._panelSize})):(this._panelSize=this._container.offsetHeight,e.each(this._sliders,function(e){t.getFirstChild(t.getFirstChild(e)).width=n._container.offsetWidth,t.getFirstChild(t.getFirstChild(e)).height=n._container.offsetHeight})),this._navs&&("click"==n.eventType?e.each(this._navs,function(e,i){e.onclick=function(n){return function(){t.addClass(e,n._navClassOn),n._play=!1,n.curIndex=i,n._play=!0,n.run()}}(n)}):e.each(this._navs,function(e,i){e.onmouseover=function(n){return function(){t.addClass(e,n._navClassOn),n._play=!1,n.curIndex=i,n.run()}}(n),e.onmouseout=function(n){return function(){t.removeClass(e,n._navClassOn),n._play=!0,n.run()}}(n)}))},run:function(n){this.curIndex<0?this.curIndex=this._count-1:this.curIndex>=this._count&&(this.curIndex=0);var i=this;this._target=-1*this._panelSize*this.curIndex,this._navs&&e.each(this._navs,function(e,n){i.curIndex==n?t.addClass(e,i._navClassOn):t.removeClass(e,i._navClassOn)}),this.scroll(),this._effect.indexOf("fade")>=0&&(t.setStyle(this._panelWrapper,"opacity",n?.5:.1),this.fade())},scroll:function(){clearTimeout(this._timer);var e=this,t=parseInt(this._panelWrapper.style[this._changeProperty])||0,n=(this._target-t)/this.step;Math.abs(n)<1&&0!=n&&(n=n>0?1:-1),0!=n?(this._panelWrapper.style[this._changeProperty]=t+n+"px",this._timer=setTimeout(function(){e.scroll()},this.slideTime)):(this._panelWrapper.style[this._changeProperty]=this._target+"px",this._play&&(this._timer=setTimeout(function(){e.curIndex++,e.run()},this.autoPlayInterval)))},fade:function(){var e=t.getStyle(this._panelWrapper,"opacity"),n=this;1>e&&(t.setStyle(this._panelWrapper,"opacity",parseFloat(e)+.02),setTimeout(function(){n.fade()},1))}},jWidget.ui.SlideView=function(e,t){return t=t||{},t.container=e,new _Slide(t)}}(),function(){var e=jWidget,t=e.dom;_Tab=function(n){this.eventType=n.eventType||"mouseover",this._container=n.container,this._type=n.type||"normal",this._navClassOn=n.navClassOn||"on";var i=this;if("list"==this._type){var o=t.getChildren(this._container);this._panels=[],this._navs=[],e.each(o,function(e,t){t%2?i._panels.push(e):i._navs.push(e)})}else this._navWrapper=t.get(n.navWrapper)||t.getFirstChild(this._container),this._navs=t.getChildren(this._navWrapper),this._panelWrapper=t.get(n.panelWrapper)||t.getNextSibling(this._navWrapper),this._panels=t.getChildren(this._panelWrapper);this.curIndex=0,e.each(this._panels,function(e,t){"none"!=e.style.display&&(i.curIndex=t)}),this._panels[this.curIndex].style.display="",this._panels[this.curIndex].style.display="",t.removeClass(this._navs[this.curIndex],this._navClassOn),t.addClass(this._navs[this.curIndex],this._navClassOn),e.each(this._navs,function(e,n){e["on"+i.eventType]=function(i){return function(){t.removeClass(i._navs[i.curIndex],i._navClassOn),i._panels[i.curIndex].style.display="none",i.curIndex=n,t.addClass(e,i._navClassOn),i._panels[i.curIndex].style.display="";try{QZFL.lazyLoad.loadHideImg(i._panels[i.curIndex])}catch(o){}}}(i)})},jWidget.ui.TabView=function(e,n){return n=n||{},n.container=t.get(e),new _Tab(n)}}();var keyname;(function(){!function(e){var t,n,i,o,a,r,s,l,c,u,d;return i={$mirror:null,css:["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX"],init:function(t){var n,i;return n=e("<div></div>"),i={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},e.each(this.css,function(e,n){return i[n]=t.css(n)}),n.css(i),this.$mirror=n,t.after(n),this},setContent:function(e){return this.$mirror.html(e),this},getFlagRect:function(){var e,t,n;return e=this.$mirror.find("span#flag"),t=e.position(),n={left:t.left,top:t.top,bottom:e.height()+t.top},this.$mirror.remove(),n}},t=function(t){var a,r=this;return a=this.$inputor=e(t),this.options={},this.query={text:"",start:0,stop:0},this._cache={},this.pos=0,this.flags={},this.theflag=null,this.search_word={},this.view=n,this.mirror=i,a.on("keyup.inputor",function(e){var t,n;return n=40===e.keyCode||38===e.keyCode,t=!(n&&r.view.isShowing()),t?r.lookup():void 0}).on("mouseup.inputor",function(e){return r.lookup()}),this.init(),o("At.new",a[0]),this},t.prototype={constructor:t,init:function(){var e=this;return this.$inputor.on("keydown.inputor",function(t){return e.onkeydown(t)}).on("scroll.inputor",function(t){return e.view.hide()}).on("blur.inputor",function(t){return e.view.hide(1e3)}),o("At.init",this.$inputor[0])},reg:function(t,n){var i,a,r;return i={},e.isFunction(n)?i.callback=n:i=n,r=(a=this.options)[t]||(a[t]=e.fn.atWho["default"]),this.options[t]=e.extend({},r,i),o("At.reg",this.$inputor[0],t,n)},dataValue:function(){var e,t;return(t=this.search_word[this.theflag])?t:(e=/data-value=["']?\$\{(\w+)\}/g.exec(this.getOpt("tpl")),this.search_word[this.theflag]=l(e)?null:e[1])},getOpt:function(e){try{return this.options[this.theflag][e]}catch(t){return null}},rect:function(){var t,n,i,o,a,r,s,l,c,u;return t=this.$inputor,document.selection?(n=document.selection.createRange(),c=n.boundingLeft+t.scrollLeft(),u=n.boundingTop+e(window).scrollTop()+t.scrollTop(),o=u+n.boundingHeight,{top:u-13,left:c-12,bottom:o}):(a=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},l=t.val().slice(0,this.pos-1),r="<span>"+a(l)+"</span>",r+="<span id='flag'>@</span>",s=t.offset(),i=this.mirror.init(t).setContent(r).getFlagRect(),c=s.left+i.left-t.scrollLeft(),u=s.top-t.scrollTop(),o=u+i.bottom,u+=i.top,{top:u,left:c,bottom:o+2})},cache:function(e){var t,n;return t=this.query.text,this.getOpt("cache")&&t?(n=this._cache)[t]||(n[t]=e):null},getKeyname:function(){var t,n,i,a,r,s,c,u,d=this;return t=this.$inputor,u=t.val(),n=t.caretPos(),c=u.slice(0,n),r=null,e.each(this.options,function(e){var t,n;return n=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),t=n.exec(c),l(t)?void 0:(r=t[2]?t[2]:t[1],d.theflag=e,!1)}),"string"==typeof r&&r.length<=20?(s=n-r.length,i=s+r.length,this.pos=s,a={text:r.toLowerCase(),start:s,end:i}):this.view.hide(),keyname=a,o("At.getKeyname",a),this.query=a},replaceStr:function(e){var t,n,i,a,r,s;return t=this.$inputor,i=this.query,a=t.val(),n=this.getOpt("display_flag")?0:this.theflag.length,r=a.slice(0,i.start-n),s=r+e+a.slice(i.end),t.val(s),t.caretPos(r.length+e.length),t.change(),o("At.replaceStr",s)},onkeydown:function(t){var n;if(n=this.view,n.isShowing()){switch(t.keyCode){case 38:t.preventDefault(),n.prev();break;case 40:t.preventDefault(),n.next();break;case 9:case 13:if(!n.isShowing())return;t.preventDefault(),n.choose();break;default:e.noop()}return t.stopPropagation()}},renderView:function(e){return o("At.renderView",this,e),e=e.splice(0,this.getOpt("limit")),e=d(e,this.dataValue()),e=c(e),e=u.call(this,e),this.view.render(this,e)},lookup:function(){var t,n,i;return(i=this.getKeyname())?(o("At.lookup.key",i),l(n=this.cache())&&l(n=this.lookupWithData(i))?e.isFunction(t=this.getOpt("callback"))?t(i.text,e.proxy(this.renderView,this)):this.view.hide():this.renderView(n),e.noop()):!1},lookupWithData:function(t){var n,i,o=this;return n=this.getOpt("data"),e.isArray(n)&&0!==n.length&&(i=e.map(n,function(n,i){var a,r,s;try{r=e.isPlainObject(n)?n[o.dataValue()]:n,s=new RegExp(t.text.replace("+","\\+"),"i"),a=r.match(s)}catch(l){return null}return a?n:null})),i}},n={timeout_id:null,id:"#at-view",holder:null,_jqo:null,jqo:function(){var t;return t=this._jqo,t=l(t)?this._jqo=e(this.id):t},init:function(){var t,n,i=this;if(l(this.jqo()))return n="<div id='"+this.id.slice(1)+"' class='at-view'><ul id='"+this.id.slice(1)+"-ul'></ul></div>",e("body").append(n),t=this.jqo().find("ul"),t.on("mouseenter.view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click",function(e){return e.stopPropagation(),e.preventDefault(),i.choose()})},isShowing:function(){return this.jqo().is(":visible")},choose:function(){var e,t;return e=this.jqo().find(".cur"),t=l(e)?this.holder.query.text+" ":e.attr(this.holder.getOpt("input"))+" ",this.holder.replaceStr(t),this.hide()},rePosition:function(){var t;return t=this.holder.rect(),t.bottom+this.jqo().height()-e(window).scrollTop()>e(window).height()&&(t.bottom=t.top-this.jqo().height()),o("AtView.rePosition",{left:t.left,top:t.bottom}),this.jqo().offset({left:t.left,top:t.bottom})},next:function(){var t,n;return t=this.jqo().find(".cur").removeClass("cur"),n=t.next(),n.length||(n=e(this.jqo().find("li")[0])),n.addClass("cur")},prev:function(){var e,t;return e=this.jqo().find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.jqo().find("li").last()),t.addClass("cur")},show:function(){return this.isShowing()||this.jqo().show(),this.rePosition()},hide:function(e){var t,n=this;return isNaN(e)?this.isShowing()?this.jqo().hide():void 0:(t=function(){return n.hide()},clearTimeout(this.timeout_id),this.timeout_id=setTimeout(t,300))},clear:function(e){return e===!0&&(this._cache={}),this.jqo().find("ul").empty()},render:function(t,n){var i,l;return e.isArray(n)?n.length<=0?(this.hide(),!0):(this.holder=t,t.cache(n),this.clear(),i=this.jqo().find("ul"),l=t.getOpt("tpl"),e.each(n,function(e,n){var c;return l||(l=a),c=r(l,n),o("AtView.render",c),i.append(s(c,t.query.text))}),this.show(),i.find("li:eq(0)").addClass("cur")):!1}},c=function(t){return e.map(t,function(t,n){return e.isPlainObject(t)||(t={id:n,name:t}),t})},r=function(e,t){var n;try{return n=e.replace(/\$\{([^\}]*)\}/g,function(e,n,i){return t[n]})}catch(i){return""}},s=function(e,t){return l(t)?e:e.replace(new RegExp(">\\s*(\\w*)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),function(e,t,n,i){return"> "+t+"<strong>"+n+"</strong>"+i+" <"})},u=function(e){var t,n,i,o,a,r,s;for(t=this.dataValue(),i=this.query.text,o=[],r=0,s=e.length;s>r;r++)n=e[r],a=n[t],-1!==a.toLowerCase().indexOf(i)&&(n.order=a.toLowerCase().indexOf(i),o.push(n));return o.sort(function(e,t){return e.order-t.order}),o},d=function(t,n){var i;return i=[],e.map(t,function(t,o){var a;return a=e.isPlainObject(t)?t[n]:t,e.inArray(a,i)<0?(i.push(a),t):void 0})},l=function(t){return!t||e.isPlainObject(t)&&e.isEmptyObject(t)||e.isArray(t)&&0===t.length||t instanceof e&&0===t.length||void 0===t},a="<li id='${id}' data-value='${name}'>${name}</li>",o=function(){},e.fn.atWho=function(i,o){return n.init(),this.filter("textarea, input").each(function(){var n,a;return n=e(this),a=n.data("AtWho"),a||n.data("AtWho",a=new t(this)),a.reg(i,o)})},e.fn.atWho["default"]={data:[],choose:"data-value",input:"input-value",callback:null,cache:!0,limit:10,display_flag:!0,tpl:a}}(window.jQuery)}).call(this),function(){!function(e){var t,n;return t=function(e){var t,n,i,o,a,r,s,l;return document.selection?(r=document.selection.createRange(),a=0,r&&r.parentElement()===e&&(o=e.value.replace(/\r\n/g,"\n"),i=o.length,l=e.createTextRange(),l.moveToBookmark(r.getBookmark()),n=e.createTextRange(),n.collapse(!1),l.compareEndPoints("StartToEnd",n)>-1?s=t=i:(s=-l.moveStart("character",-i),t=-l.moveEnd("character",-i)))):s=e.selectionStart,s},n=function(e,t){var n;return document.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange(t,t)},e.fn.caretPos=function(e){var i;return i=this[0],i.focus(),e?n(i,e):t(i)}}(window.jQuery)}.call(this),jQuery.ui||function(e){function t(t,n,i,o){function a(i){var o=e[t][n][i]||[];return"string"==typeof o?o.split(/,?\s+/):o}var r=a("getter");return 1==o.length&&"string"==typeof o[0]&&(r=r.concat(a("getterSetter"))),-1!=e.inArray(i,r)}var n=e.fn.remove,i=e.browser.mozilla&&parseFloat(e.browser.version)<1.9;if(e.ui={version:"1.7.2",plugin:{add:function(t,n,i){var o=e.ui[t].prototype;for(var a in i)o.plugins[a]=o.plugins[a]||[],o.plugins[a].push([n,i[a]])},call:function(e,t,n){var i=e.plugins[t];if(i&&e.element[0].parentNode)for(var o=0;o<i.length;o++)e.options[i[o][0]]&&i[o][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,n){if("hidden"==e(t).css("overflow"))return!1;var i=n&&"left"==n?"scrollLeft":"scrollTop",o=!1;return t[i]>0?!0:(t[i]=1,o=t[i]>0,t[i]=0,o)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,o,a,r){return e.ui.isOverAxis(t,i,a)&&e.ui.isOverAxis(n,o,r)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}},i){var o=e.attr,a=e.fn.removeAttr,r="http://www.w3.org/2005/07/aaa",s=/^aria-/,l=/^wairole:/;e.attr=function(e,t,n){var i=void 0!==n;return"role"==t?i?o.call(this,e,t,"wairole:"+n):(o.apply(this,arguments)||"").replace(l,""):s.test(t)?i?e.setAttributeNS(r,t.replace(s,"aaa:"),n):o.call(this,e,t.replace(s,"aaa:")):o.apply(this,arguments)},e.fn.removeAttr=function(e){return s.test(e)?this.each(function(){this.removeAttributeNS(r,e.replace(s,""))}):a.call(this,e)}}e.fn.extend({remove:function(){return e("*",this).add(this).each(function(){e(this).triggerHandler("remove")}),n.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t}}),e.extend(e.expr[":"],{data:function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){var n=t.nodeName.toLowerCase(),i=e.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n||"area"==n?t.href||!isNaN(i):!isNaN(i))&&!e(t)["area"==n?"parents":"closest"](":hidden").length},tabbable:function(t){var n=e.attr(t,"tabindex");return(isNaN(n)||n>=0)&&e(t).is(":focusable")}}),e.widget=function(n,i){var o=n.split(".")[0];n=n.split(".")[1],e.fn[n]=function(i){var a="string"==typeof i,r=Array.prototype.slice.call(arguments,1);if(a&&"_"==i.substring(0,1))return this;if(a&&t(o,n,i,r)){var s=e.data(this[0],n);return s?s[i].apply(s,r):void 0}return this.each(function(){var t=e.data(this,n);!t&&!a&&e.data(this,n,new e[o][n](this,i))._init(),t&&a&&e.isFunction(t[i])&&t[i].apply(t,r)})},e[o]=e[o]||{},e[o][n]=function(t,i){var a=this;this.namespace=o,this.widgetName=n,this.widgetEventPrefix=e[o][n].eventPrefix||n,this.widgetBaseClass=o+"-"+n,this.options=e.extend({},e.widget.defaults,e[o][n].defaults,e.metadata&&e.metadata.get(t)[n],i),this.element=e(t).bind("setData."+n,function(e,n,i){return e.target==t?a._setData(n,i):void 0}).bind("getData."+n,function(e,n){return e.target==t?a._getData(n):void 0}).bind("remove",function(){return a.destroy()})},e[o][n].prototype=e.extend({},e.widget.prototype,i),e[o][n].getterSetter="option"},e.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(t,n){var i=t,o=this;if("string"==typeof t){if(void 0===n)return this._getData(t);i={},i[t]=n}e.each(i,function(e,t){o._setData(e,t)})},_getData:function(e){return this.options[e]},_setData:function(e,t){this.options[e]=t,"disabled"==e&&this.element[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",t)},enable:function(){this._setData("disabled",!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(t,n,i){var o=this.options[t],a=t==this.widgetEventPrefix?t:this.widgetEventPrefix+t;if(n=e.Event(n),n.type=a,n.originalEvent)for(var r,s=e.event.props.length;s;)r=e.event.props[--s],n[r]=n.originalEvent[r];return this.element.trigger(n,i),!(e.isFunction(o)&&o.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}},e.widget.defaults={disabled:!1},e.ui.mouse={_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){return t._preventClickEvent?(t._preventClickEvent=!1,e.stopImmediatePropagation(),!1):void 0}),e.browser.msie&&(this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on")),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1==t.which,o="string"==typeof this.options.cancel?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;return i&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0,!0)):!0}},_mouseMove:function(t){return e.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}},e.ui.mouse.defaults={cancel:null,distance:1,delay:0}}(jQuery);